# Example of cluster-scoped ProviderConfig using IRSA with a ServiceAccount
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: team-a
  namespace: team-a
  annotations:
    eks.amazonaws.com/role-arn: arn:aws:iam::123456789012:role/team-a-irsa-role
---
apiVersion: aws.upbound.io/v1beta1
kind: ProviderConfig
metadata:
  name: team-a-irsa
spec:
  credentials:
    source: ServiceAccount
  serviceAccountRef:
    name: team-a
    namespace: team-a
  # At least one role must be specified for AssumeRoleWithWebIdentity
  assumeRoleChain:
    - roleARN: arn:aws:iam::123456789012:role/team-a-irsa-role
