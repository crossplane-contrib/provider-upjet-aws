apiVersion: vpclattice.aws.upbound.io/v1beta1
kind: AuthPolicy
metadata:
  annotations:
    meta.upbound.io/example-id: vpclattice/v1beta1/authpolicy
  labels:
    testing.upbound.io/example-name: example
  name: example
spec:
  forProvider:
    policy: |-
      ${jsonencode({
          Version = "2012-10-17"
          Statement = [
            {
              Action    = "*"
              Effect    = "Allow"
              Principal = "*"
              Resource  = "*"
              Condition = {
                StringNotEqualsIgnoreCase = {
                  "aws:PrincipalType" = "anonymous"
                }
              }
            }
          ]
        })}
    region: us-west-1
    resourceIdentifierSelector:
      matchLabels:
        testing.upbound.io/example-name: example

---

apiVersion: vpclattice.aws.upbound.io/v1beta1
kind: Service
metadata:
  annotations:
    meta.upbound.io/example-id: vpclattice/v1beta1/authpolicy
  labels:
    testing.upbound.io/example-name: example
  name: example
spec:
  forProvider:
    authType: AWS_IAM
    customDomainName: example.com
    name: example-vpclattice-service
    region: us-west-1
