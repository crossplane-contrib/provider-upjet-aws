apiVersion: ec2.aws.upbound.io/v1alpha1
kind: SpotFleetRequest
metadata:
  name: example
spec:
  forProvider:
    allocationStrategy: diversified
    iamFleetRole: arn:aws:iam::12345678:role/spot-fleet
    launchSpecification:
    - ami: ami-1234
      iamInstanceProfileArn: ${aws_iam_instance_profile.example.arn}
      instanceType: m4.10xlarge
      placementTenancy: dedicated
      spotPrice: "2.793"
    - ami: ami-5678
      availabilityZone: us-west-1a
      iamInstanceProfileArn: ${aws_iam_instance_profile.example.arn}
      instanceType: m4.4xlarge
      keyName: my-key
      rootBlockDevice:
      - volumeSize: "300"
        volumeType: gp2
      spotPrice: "1.117"
      subnetId: subnet-1234
      tags:
        Name: spot-fleet-example
      weightedCapacity: 35
    spotPrice: "0.03"
    targetCapacity: 6
    validUntil: "2019-11-04T20:44:20Z"
  providerConfigRef:
    name: example
